<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/project-documentation/favicon.svg"><meta name="generator" content="Astro v5.7.13"><title>Project Documentation</title><link rel="stylesheet" href="/project-documentation/builds/general.BIkkugLw.css"></head> <body class="mainLayout__content" id="idBody" data-astro-cid-sckkx6r4> <nav class="desktopMainBarMenuLayout__content" data-astro-cid-sckkx6r4> <section class="desktopMainBarMenu__content"> <div class="desktopMainBarMenu__component"> <div class="desktopMainBarMenu__mobileSideSubMenuBar"> <button id=""> <div class="inline-block"> <img src="/project-documentation/assets/arrow-right.svg" alt="Arrow Right menu" class="arrowRight"> </div> </button> </div> <div class="desktopMainBarMenu__logo"> <strong> <a href="/project-documentation/">
TrulyDigital
</a> </strong> </div> <div class="desktopMainBarMenu__projects"> <a href="/project-documentation/">
All Projects
</a> </div> <ul class="desktopMainBarMenu__items"> <li> <a href="/project-documentation/DATA_STREET">
Data Street
</a> </li> <li> <a href="/project-documentation/DOCKER_STACK">
Docker Stack
</a> </li> </ul> </div> <div class="desktopMainBarMenu__socialAndMobileSideBarMenu"> <button id="idBurguerButtonMainBarMenu"> <div class="inline-block"> <img src="/project-documentation/assets/burguer.svg" alt="Burguer menu" class="burguer"> </div> </button> </div> </section> </nav> <nav class="desktopSideBarMenuLayout__content" data-astro-cid-sckkx6r4> <div class="desktopSideBarMenu__content"> <div class="desktopSideBarMenuItems__content" id="idDesktopSideBarMenuItemsContent"> <div> <a href="/project-documentation/">Projects</a> </div> <ul> <li class="desktopSideBarMenu__item"> <a href="/project-documentation/DATA_STREET">💻 Data Street</a> </li> <li class="desktopSideBarMenu__item"> <a href="/project-documentation/DOCKER_STACK">💻 Docker Stack</a> </li> </ul> </div> <div class="desktopSideBarMenu__burguer"> <button id=""> <div class="inline-block"> <img src="/project-documentation/assets/burguer.svg" alt="Burguer menu" class="burguer"> </div> </button> </div> </div> </nav> <nav class="
                mobileSideBarMenuLayout__content
                mobileSideBarMenuLayout__content-close
            " id="idMobileSideBarMenu" data-astro-cid-sckkx6r4> <div class="mobileSideBarMenu__content"> <div class="mobileSideBarMenu__close"> <button id="idCloseButtonMobileSideBarMenu"> <div class="inline-block"> <img src="/project-documentation/assets/close-square.svg" alt="Close Side Bar Menu" class="closeSquare"> </div> </button> </div> <ul class="mobileSideBarMenu__items"> <li> <a href="/project-documentation/">
All Projects
</a> </li> <li> <a href="/project-documentation/DATA_STREET">
Data Street
</a> </li> <li> <a href="/project-documentation/DOCKER_STACK">
Docker Stack
</a> </li> </ul> </div> </nav> <article class="articleLayout__content" data-astro-cid-sckkx6r4> <section class="article__content" data-astro-cid-sckkx6r4> <p>
    <img src="/project-documentation/DATA_STREET/hero-medium.webp" srcset="
            /project-documentation/DATA_STREET/hero-small.webp 400w,
            /project-documentation/DATA_STREET/hero-medium.webp 800w,
            /project-documentation/DATA_STREET/hero-large.webp 1200w
        " sizes="(max-width: 600px) 100vw" alt="Descripción de mi foto">
</p>
<p><a href="/project-documentation/DATA_STREET">👉 Data Street</a>      <a href="/project-documentation/DATA_STREET/server-sftp">👉 SFTP Server</a></p>
<h1 id="sftp-server">SFTP Server</h1>
<p>Details of the SFTP-server implementation in Docker, along with an overview of the solution architecture and the process flow for this part of the application.</p>
<p><a href="#1-introduction">1. Introduction</a>
<a href="#2-server-architecture-with-docker">2. Server Architecture with Docker</a>
<a href="#3-project-folder-structure">3. Project Folder Structure</a>
<a href="#4-docker-compose-file">4. Docker compose file</a></p>
<h2 id="1-introduction">1. Introduction</h2>
<p>The <code>Data Street</code> project provides functionality to load <code>CSV</code> files via an SFTP server running in a Docker container,
the CSV file will be processed by the Kafka container using the kafka Connect service, and each record (line) will be written to a custom topic, this will be covered in the specific kafka documentation.</p>
<p>For now, we’re only interested in the SFTP server and the following image shows the software architecture and the components we need for its implementation.</p>
<p class="article_images">
    <img src="/project-documentation/DATA_STREET/server_sftp-introduction.webp" alt="Descripción de mi foto">
</p>
<p><strong>An Ubuntu Server</strong> wheter bare-metal or a cloud-based virtual private server (VPS) and hosts the entire application and its services or componentes as Docker containers. In this case, it runs a Docker container that implements an SFTP server on linux.</p>
<p><strong>A Docker container</strong> is a lightweight service that can run any type of software application. It must be deployed on a <code>Ubuntu Server</code> host (whether bare-metal or a cloud-based VPS).</p>
<p><strong>A SFTP Linux Server</strong> is a lightweight Linux operating system running in a <code>Docker Container</code> with SFTP service.</p>
<p><strong>An Actor</strong> is a user —like you or me— who can send CSV files to the SFTP server using SFTP client on their own computer.</p>
<h2 id="2-server-architecture-with-docker">2. Server Architecture with Docker</h2>
<p>As I mentioned before, we have deployed a Docker container running an SFTP server on Linux, and we´ve mapped a volume between host system (Ubuntu Server) and the Linux container. This means the host—Operating System— and the container share the same folder, ensuring data persistence.</p>
<p class="article_images">
    <img src="/project-documentation/DATA_STREET/server_sftp-docker.webp" alt="Descripción de mi foto">
</p>
<p>In this case, the <strong>Folder - Operating System</strong> and <strong>Folder - SFTP server</strong> refer to the same location.</p>
<p>Child folders like <code>yahoo_finance</code> and <code>others</code> indicate that you can create any folders needed to store CSV files, as long as they are always subfolders of the <strong>Folder - SFTP server</strong>.</p>
<h2 id="3-project-folder-structure">3. Project Folder Structure</h2>
<p>The folder structure for the SFTP server project is as follows:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="txt"><code><span class="line"><span>DATA_STREET/</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>├── 📁 deploy/</span></span>
<span class="line"><span>|   ├── 📄 .env</span></span>
<span class="line"><span>|   ├── 📄 server-sftp.dev.yaml</span></span>
<span class="line"><span>|   ├── 📄 server-sftp.local.yaml</span></span>
<span class="line"><span>|   └── 📄 server-sftp.prod.yaml</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>├── 📁 server_sftp/</span></span>
<span class="line"><span>│   └── 📁 yahoo_finance/</span></span>
<span class="line"><span>│       ├── 📁 1_file_new/</span></span>
<span class="line"><span>│       ├── 📁 2_file_processed/</span></span>
<span class="line"><span>│       └── 📁 3_errors/</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>├── .gitignore</span></span>
<span class="line"><span>└── README.md</span></span></code></pre>
<p>The following files are YAML descriptors based on Docker compose. They allow us to deploy a Docker container instance running an SFTP server.  <br></p>
<p><strong>1.</strong> server-sftp.dev.yaml  <br>
<strong>2.</strong> server-sftp.local.yaml  <br>
<strong>3.</strong> server-sftp.prod.yaml  <br></p>
<p>The <code>.env</code> file contains parameterized variables that the YAML files can read and use to build the Docker container, so this file is essential.</p>
<h2 id="4-docker-compose-file">4. Docker Compose File</h2>
<p>The following is the Docker Compose file for the <code>local</code> environment. It is similar to the <code>dev</code> and <code>prod</code> files, but here we only explain the local environment file.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">services</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # sftp server</span></span>
<span class="line"><span style="color:#85E89D">    server-sftp</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        image</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#9ECBFF">            atmoz/sftp:latest</span></span>
<span class="line"><span style="color:#85E89D">        container_name</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#9ECBFF">            server-sftp</span></span>
<span class="line"><span style="color:#85E89D">        ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#9ECBFF">"${ENV_LOCAL_SFTP_PORT}:22"</span></span>
<span class="line"><span style="color:#85E89D">        command</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#9ECBFF">            ${ENV_LOCAL_SFTP_USER}:${ENV_LOCAL_SFTP_PASSWORD}:::../${ENV_LOCAL_SFTP_USER}</span></span>
<span class="line"><span style="color:#85E89D">        volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#9ECBFF">../server_sftp:${ENV_LOCAL_SFTP_CONTAINER_PATH_FOLDER}</span></span>
<span class="line"><span style="color:#85E89D">        networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#9ECBFF">net-local-data-street</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    net-local-data-street</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">net-local-data-street</span></span>
<span class="line"><span style="color:#85E89D">        external</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span></code></pre>
<p>text text text</p> </section> </article> <aside class="asideLayout__content" data-astro-cid-sckkx6r4> <section>
Aside
</section> </aside> <footer class="footerLayout__content" data-astro-cid-sckkx6r4> <section>
Footer TrulyDigital
</section> </footer>  <script type="module">var i=(e=>(e.NAV_OPEN="NAV_OPEN",e.NAV_CLOSE="NAV_CLOSE",e))(i||{});class a{burguerButton;navStateTopic;constructor(t){this.navStateTopic=t,this.burguerButton=document.getElementById("idBurguerButtonMainBarMenu"),this.init()}init(){this.burguerButton&&this.burguerButton.addEventListener("click",this.handleClick.bind(this))}handleClick(t){if(!this.navStateTopic.getState().isOpen){const n={isOpen:!0},o={action:i.NAV_OPEN};this.navStateTopic.setState(o,n)}}}class c{observers;navStateType;constructor(){this.observers=[],document.body.scrollWidth,this.navStateType={isOpen:!1}}subscribe(t){this.observers.push(t)}notify(t){for(const s of this.observers)s.update(t)}setState(t,s){this.navStateType=s,this.notify(t)}getState(){return this.navStateType}}class r{navStateTopic;mobileSideBarMenu;constructor(t){this.navStateTopic=t,this.navStateTopic.subscribe(this),this.mobileSideBarMenu=document.getElementById("idMobileSideBarMenu")}update(t){t.action===i.NAV_OPEN&&this.sideNavOpen(),t.action===i.NAV_CLOSE&&this.sideNavClose()}sideNavOpen(){this.mobileSideBarMenu&&(this.mobileSideBarMenu.classList.remove("mobileSideBarMenuLayout__content-close"),this.mobileSideBarMenu.classList.add("mobileSideBarMenuLayout__content-open"))}sideNavClose(){this.mobileSideBarMenu&&(this.mobileSideBarMenu.classList.remove("mobileSideBarMenuLayout__content-open"),this.mobileSideBarMenu.classList.add("mobileSideBarMenuLayout__content-close"))}}class d{closeButton;navStateTopic;constructor(t){this.navStateTopic=t,this.closeButton=document.getElementById("idCloseButtonMobileSideBarMenu"),this.init()}init(){this.closeButton&&this.closeButton.addEventListener("click",this.handleClick.bind(this))}handleClick(t){if(this.navStateTopic.getState().isOpen){const n={isOpen:!1},o={action:i.NAV_CLOSE};this.navStateTopic.setState(o,n)}}}class u{navStateTopic;body;constructor(t){this.navStateTopic=t,this.navStateTopic.subscribe(this),this.body=document.getElementById("idBody")}update(t){t.action==i.NAV_OPEN&&this.bodyOpacity(),t.action===i.NAV_CLOSE&&this.removeBodyOpacity()}bodyOpacity(){this.body&&this.body.classList.add("mainLayout__content-opacity")}removeBodyOpacity(){this.body&&this.body.classList.remove("mainLayout__content-opacity")}}class l{constructor(){const t=new c;new a(t),new d(t),new r(t),new u(t)}}function h(){document.addEventListener("DOMContentLoaded",()=>{new l})}h();</script></body></html>